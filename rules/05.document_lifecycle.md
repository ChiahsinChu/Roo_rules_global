# üö¶ Document Lifecycle & Governance

This document defines how project documentation in `docs/agents/` is managed. The Agent must STRICTLY respect the status of every markdown file.

## 1. The Header Block

All documentation files (docs, plans, specs) must start with this exact header block:

```markdown
---
status: draft # draft | review | published | archived
author: <name>
last_updated: <yyyy-mm-dd>
---
```

Before editing ANY documentation file, check the header block defined above.

## 2. Status Definitions & Permissions

### `status: draft`

- **Meaning:** Active work-in-progress. Brainstorming, rough notes, or initial implementations.
- **Agent Permission:** ‚úÖ **EDIT ALLOWED.**
- You may refine, rewrite, and update logic freely.
- **Action:** specific instruction: When you edit a draft, you must update the `last_updated` date in the header.

### `status: review`

- **Meaning:** Content is complete but waiting for human sign-off.
- **Agent Permission:** ‚õî **READ-ONLY.**
- Do NOT edit the text directly.
- If changes are needed, propose them in the chat window or create a new file (e.g., `_v2`).

### `status: published`

- **Meaning:** The agreed-upon source of truth.
- **Agent Permission:** ‚õî **IMMUTABLE.**
- Never modify. Treat this as a constraint/rule for your code.
- To change this, you must ask the user to downgrade it to `draft` first.

### `status: archived`

- **Meaning:** Historical context or deprecated ideas.
- **Agent Permission:** ‚õî **IGNORE.**
- Do not use this for current context unless explicitly asked.

## 3. Auto-Formatting Rule

If a document lacks a header:

1. Assume it is `status: draft`.
2. **Action:** In your first edit, strictly prepend the Header Block to the top of the file with today's date.

## 4. Changelog Format

### Standard Changelog Format

All documentation files MUST include a changelog section at the bottom:

```markdown
## Changelog

| Version | Date       | Changes                                         | Author    |
| ------- | ---------- | ----------------------------------------------- | --------- |
| v1.2    | 2024-01-20 | Added comment feature                           | Li Si     |
| v1.1    | 2024-01-15 | Optimized search logic, supports fuzzy matching | Zhang San |
| v1.0    | 2024-01-10 | Initial release                                 | Zhang San |
```

### Version Numbering Convention

Use this simplified semantic versioning:

```
vMAJOR.MINOR

MAJOR: Major changes, incompatible changes
MINOR: New features, backward compatible changes
```

**Examples**:

- `v1.0` ‚Üí `v1.1`: Added a new field
- `v1.1` ‚Üí `v2.0`: Complete data structure refactoring

### Writing Change Content

**Good writing**: Clear, specific, traceable

```
‚úÖ Added user avatar upload feature, supports jpg/png formats
‚úÖ Modified login API, added CAPTCHA verification
‚úÖ Removed deprecated getOldUser API
```

**Bad writing**: Vague, generic

```
‚ùå Fixed some issues
‚ùå Optimized
‚ùå Updated
```

### Relationship with Git

Document changelog and Git commit records can be used together:

```markdown
## Changelog

| Version | Date       | Changes               | Commit                  |
| ------- | ---------- | --------------------- | ----------------------- |
| v1.2    | 2024-01-20 | Added comment feature | [abc123](./commit-link) |
```

**Rule:** Document changelog should be a **business perspective summary**, NOT a copy of every Git commit.

## 5. Document References Index

### Standard Index Format

All documentation files MUST include a related documents index section. For example,

```markdown
## Related Documents

| Document Type | Link                                          | Description                            |
| ------------- | --------------------------------------------- | -------------------------------------- |
| Tech Spec     | [user-auth-tech.md](./tech/user-auth-tech.md) | Authentication flow technical design   |
| API Docs      | [api/auth.md](./api/auth.md)                  | Login and registration API definitions |
| Test Cases    | [tests/auth.md](./tests/auth.md)              | Functional test cases                  |
| Design Specs  | [Figma Link](https://figma.com/...)           | UI design specifications               |
```

### Index Maintenance Rules

1. **Add when creating**: When creating a new document, update the index of related documents at the same time
2. **Clean up when deleting**: When deleting a document, check and remove invalid links
3. **Regular checks**: Ensure links are still valid
4. **Bidirectional linking**: If A links to B, B should also link to A

### Practical Rules

1. **Use relative paths**: `./tech-spec.md` instead of absolute paths
2. **Explain document purpose**: Not just provide a link, but also explain what this document is for
3. **Distinguish required and optional**: Mark which documents are required reading and which are optional references
